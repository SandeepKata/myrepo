name: Environments, Variables, and Secrets

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    # ðŸ”¹ Run workflow for both environments
    strategy:
      matrix:
        environment: [dev, prod]

    # ðŸ”¹ Select environment based on matrix
    environment: ${{ matrix.environment }}

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      # ðŸ”¹ Display Environment Variable (ENVIRONMENT)
      - name: Display Environment Variable
        run: |
          echo "Current running environment: ${{ matrix.environment }}"
          echo "ENVIRONMENT: $ENVIRONMENT"
          echo "ENVIRONMENT length: ${#ENVIRONMENT}"
          echo "ENVIRONMENT (first 5 chars): ${ENVIRONMENT:0:5}"
        env:
          ENVIRONMENT: ${{ vars.ENVIRONMENT }}

      # ðŸ”¹ Display Environment Secret (SECRET)
      - name: Display Environment Secret
        run: |
          echo "SECRET length: ${#SECRET}"
        env:
          SECRET: ${{ secrets.SECRET }}

      # ðŸ”¹ Display Repository Variable (REPOSITORY_VARIABLE)
      - name: Display Repository Variable
        run: |
          echo "Repository variable: ${{ vars.REPOSITORY_VARIABLE }}"
